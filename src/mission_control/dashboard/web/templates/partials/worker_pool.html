{% if snap and snap.workers %}
<table class="worker-table">
	<thead>
		<tr>
			<th>ID</th>
			<th>Status</th>
			<th>Current Task</th>
			<th>Tokens</th>
			<th>Cost</th>
		</tr>
	</thead>
	<tbody>
		{% for w in snap.workers %}
		<tr>
			<td class="mono">{{ w.id[:8] }}</td>
			<td>
				{% if w.status == 'working' %}
					<span class="dot dot-green" title="{{ tooltip('working') }}"></span> {{ label('working') }}
				{% elif w.status == 'idle' %}
					<span class="dot dot-gray" title="{{ tooltip('idle') }}"></span> {{ label('idle') }}
				{% elif w.status == 'dead' %}
					<span class="dot dot-red" title="{{ tooltip('dead') }}"></span> {{ label('dead') }}
				{% else %}
					<span class="dot dot-gray" title="{{ tooltip(w.status) }}"></span> {{ label(w.status) }}
				{% endif %}
			</td>
			<td>{{ w.current_unit_title or '-' }}</td>
			<td>
				{%- set total_k = ((w.input_tokens + w.output_tokens) / 1000)|round(1) -%}
				{{ total_k }}K
			</td>
			<td>${{ '%.2f'|format(w.total_cost_usd) }}</td>
		</tr>
		{% endfor %}
	</tbody>
</table>
<div class="worker-summary">
	<span class="dot dot-green" title="{{ tooltip('working') }}"></span> {{ snap.workers_active }} {{ label('working').lower() }}
	<span class="dot dot-gray" title="{{ tooltip('idle') }}"></span> {{ snap.workers_idle }} {{ label('idle').lower() }}
	<span class="dot dot-red" title="{{ tooltip('dead') }}"></span> {{ snap.workers_dead }} {{ label('dead').lower() }}
</div>
{% else %}
<p class="muted">No active workers</p>
{% endif %}
